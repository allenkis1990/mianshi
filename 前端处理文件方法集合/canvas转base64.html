<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<img src="images/afei.jpg" id="img" />

<script>
    var img = document.getElementById('img')

    fileToBase64(img,10,function(base64){
        console.log(base64);
    })
    function fileToBase64(img,bili,cb){
        var canvas = document.createElement('canvas')
        var image = new Image()
        image.src = img.src
        image.addEventListener('load',function(e){
            console.log(image.width,image.height);
            var w = image.width/bili,
                h = image.height/bili
            canvas.width = w
            canvas.height = h
            var context = canvas.getContext('2d')
            context.drawImage(img,0,0,w,h)
            var base64 = canvas.toDataURL('image/jpeg')
            cb(base64)

            //canvas转blob可获取图片大小格式什么的
//            canvas.toBlob(function(blob){
//                console.log(blob);
//            })
        })
    }


    // 参数解释
    /*let userAnswerBigImgObj = this.userAnswerBigImgObj
    var image = new Image()
    image.src = userAnswerBigImgObj.url
    image.crossOrigin = '*'
    image.addEventListener('load',function(e){
      var canvas = document.createElement('canvas')
      canvas.width = w
      canvas.height = h
      var context = canvas.getContext('2d')
      //drawImage参数：1.图片对象 2.从图片上X开始 3.从图片上Y开始  4.截取的宽 5.截取的高 6.对应canvas的X 7.对应canvas的Y 8.截取canvas的宽 9.截取canvas的高
      context.drawImage(image,x,y,w,h,0,0,w,h)
      var base64 = canvas.toDataURL('image/png')
      cb(base64)
      //解决图片跨域canvas报错
      // imgDom.setAttribute('crossOrigin','*')
      // imgDom.src = userAnswerBigImgObj.url
      // imgDom.width = userAnswerBigImgObj.width
      // imgDom.height = userAnswerBigImgObj.height

    })*/
</script>
</body>
</html>